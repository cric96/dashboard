(function(){var e={6700:function(e,t,s){var i={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function o(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=n,e.exports=o,o.id=6700},9307:function(e,t,s){"use strict";var i=s(9242),o=s(1020),n=s(3396);const l={id:"main",style:{"background-color":"#f4f4f8"}},a={class:"flex justify-content-center my-1"};function r(e,t,s,i,o,r){const d=(0,n.up)("Toast"),u=(0,n.up)("NavBar"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(d),(0,n._)("div",l,[(0,n.Wm)(u),(0,n._)("div",a,[(0,n.Wm)(c)])])],64)}var d=s(7139);const u=e=>((0,n.dD)("data-v-76b1bced"),e=e(),(0,n.Cn)(),e),c=u((()=>(0,n._)("h3",{class:"m-3"}," Smart Waste Collection ",-1))),m={class:"p-button-set"};function p(e,t,s,i,o,l){const a=(0,n.up)("Button"),r=(0,n.up)("router-link"),u=(0,n.up)("NotificationsPanel"),p=(0,n.up)("OverlayPanel"),h=(0,n.up)("LogoutPanel"),g=(0,n.up)("Menubar");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(g,{model:o.items,class:"md:py-2 p-0"},{start:(0,n.w5)((()=>[c])),item:(0,n.w5)((({item:e})=>[e.role.includes(i.userStore.role)?((0,n.wg)(),(0,n.j4)(r,{key:0,to:e.to},{default:(0,n.w5)((({href:t,navigate:s})=>[(0,n.Wm)(a,{class:"p-button-text nav-button md:text-lg",href:t,onClick:s},{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.label),1)])),_:2},1032,["href","onClick"])])),_:2},1032,["to"])):(0,n.kq)("",!0)])),end:(0,n.w5)((()=>[(0,n._)("span",m,[i.userStore.isCitizen?((0,n.wg)(),(0,n.j4)(a,{key:0,icon:"pi pi-bell",class:"p-button-text p-button-rounded nav-button",badge:l.notificationsBadge,onClick:l.toggleOP},null,8,["badge","onClick"])):(0,n.kq)("",!0),(0,n.Wm)(p,{ref:"op"},{default:(0,n.w5)((()=>[(0,n.Wm)(u)])),_:1},512),(0,n.Wm)(a,{icon:"pi pi-user",class:"p-button-text p-button-rounded nav-button md:mx-3",onClick:l.account},null,8,["onClick"]),(0,n.Wm)(p,{ref:"lop"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{onClose:t[0]||(t[0]=t=>e.$refs.lop.hide())})])),_:1},512)])])),_:1},8,["model"])])}var h=s(5106),g=s(1826),f=s(1901);const v=e=>((0,n.dD)("data-v-0722ab5b"),e=e(),(0,n.Cn)(),e),b={key:0,class:"outer-container"},w={class:"notifications-container flex flex-column-reverse"},k={class:"title"},_=v((()=>(0,n._)("p",{class:"description"}," Your at home collection booking is updated! ",-1))),C={class:"flex justify-content-between flex-wrap",style:{padding:"0"}},y={key:1};function S(e,t,s,i,o,l){const a=(0,n.up)("Button"),r=(0,n.up)("Card"),u=(0,n.up)("ScrollPanel");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i.notStore.empty?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",b,[(0,n.Wm)(u,{style:{height:"400px"}},{default:(0,n.w5)((()=>[(0,n._)("div",w,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.notStore.notifications,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e._id,style:{"margin-bottom":".7rem"}},{title:(0,n.w5)((()=>[(0,n._)("p",k," Booking: "+(0,d.zw)(e.booking._id),1)])),content:(0,n.w5)((()=>[_])),footer:(0,n.w5)((()=>[(0,n._)("div",C,[(0,n.Wm)(a,{class:"p-button-rounded p-button-sm",onClick:t=>i.notStore.delete(e)},{default:(0,n.w5)((()=>[(0,n.Uk)(" Delete ")])),_:2},1032,["onClick"]),e.isRead?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(a,{key:0,class:"p-button-rounded p-button-sm",onClick:t=>i.notStore.markAsRead(e)},{default:(0,n.w5)((()=>[(0,n.Uk)(" Mark as read ")])),_:2},1032,["onClick"]))])])),_:2},1024)))),128))])])),_:1})])),i.notStore.empty?((0,n.wg)(),(0,n.iD)("p",y," No new notifications ")):(0,n.kq)("",!0)],64)}var $=s(2066),P=s(70);const E=(0,o.Q_)("booking",{state:()=>({bookings:[]}),getters:{},actions:{updateBooking(e){let t=this.bookings.find((t=>t._id===e._id));this.bookings.splice(this.bookings.indexOf(t),1,e)},fetchUserBookings(e){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_BOOKING_MICROSERVICE+"/bookings/user/"+e).then((e=>this.bookings=e.data.reverse()))},fetchAllBookings(){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_BOOKING_MICROSERVICE+"/bookings/").then((e=>this.bookings=e.data.reverse()))}}}),I=(0,o.Q_)("user",{state:()=>({firstname:"",lastname:"",email:"",userId:"",role:""}),getters:{getUserName:e=>e.firstname+" "+e.lastname,isLogged:e=>""!==e.userId,isCitizen:e=>"CITIZEN"===e.role,isManager:e=>"MANAGER"===e.role},actions:{login(e){this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.username,this.userId=e._id,this.role=e.role},logout(){this.firstname="",this.lastname="",this.email="",this.userId="",this.role=""}},persist:!0}),j=(0,o.Q_)("socket",{state:()=>({socket:(0,$.io)({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_BOOKING_MICROSERVICE,{autoConnect:!1}),sessionId:"",userId:""}),getters:{},actions:{connect(e){console.log("Connecting... "+e),this.userId=I().userId,this.socket.auth={userId:e},this.socket.connect(),this.socket.on("connect_error",(()=>{console.log("ERROR"),socket.connect()})),this.socket.on("session",(({sessionId:e,uid:t})=>{this.socket.auth={sessionId:e},this.sessionId=e,console.log("sessionId: ",this.sessionId),console.log("userId: ",t)})),this.receiveNotification()},reconnect(){console.log("Riconnetto"),this.socket.auth={sessionId:this.sessionId},this.socket.connect(),this.socket.on("session",(({sessionId:e})=>{console.log("sessione attiva: "+e)})),this.receiveNotification()},receiveNotification(){console.log("Ricevo notifiche"),this.socket.on("prova",(e=>console.log(e))),this.socket.on("assigned",(e=>{console.log("notification received"),D().addNotification(e),E().updateBooking(e.booking)}))},emit(e,t){this.socket.emit(e,t)},disconnect(){this.socket.disconnect()}},persist:{paths:["sessionId"]}}),D=(0,o.Q_)("notification",{state:()=>({notifications:[]}),getters:{getUnreadNotifications:e=>e.notifications.filter((e=>!e.isRead)),getUnreadNumber(){return this.getUnreadNotifications.length},empty(){return 0===this.notifications.length}},actions:{addNotification(e){this.notifications.includes(e)||this.notifications.push(e)},markAsRead(e){e.isRead=!0,j().emit("markAsRead",{id:e._id,notification:e})},delete(e){this.notifications.splice(this.notifications.indexOf(e),1),j().emit("delete",e._id)},logout(){this.notifications=[]}}});var O=s(606),x=s(9569),V={name:"NotificationsPanel",components:{Card:O.Z,Button:g.Z,ScrollPanel:x.Z},setup(){const e=D();return{notStore:e}}},M=s(89);const T=(0,M.Z)(V,[["render",S],["__scopeId","data-v-0722ab5b"]]);var U=T;const A={class:"flex justify-content-center align-items-center"};function W(e,t,s,i,o,l){const a=(0,n.up)("Button"),r=(0,n.up)("Card");return i.userStore.isLogged?((0,n.wg)(),(0,n.j4)(r,{key:0,class:"flex justify-content-center"},{title:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(i.userStore.getUserName),1)])),subtitle:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(i.userStore.userId),1)])),footer:(0,n.w5)((()=>[(0,n._)("div",A,[(0,n.Wm)(a,{label:"Logout",onClick:t[0]||(t[0]=e=>l.logout())})])])),_:1})):(0,n.kq)("",!0)}var Z={name:"LogoutPanel",components:{Card:O.Z,Button:g.Z},emits:["close"],setup(){const e=I(),t=D(),s=j();return{userStore:e,notStore:t,socketStore:s}},methods:{logout(){this.$emit("close"),this.userStore.logout(),this.socketStore.disconnect(),this.notStore.logout(),this.$router.push("dashboard/account/")}}};const N=(0,M.Z)(Z,[["render",W]]);var R=N,B={name:"NavBar",components:{LogoutPanel:R,Menubar:h.Z,Button:g.Z,NotificationsPanel:U,OverlayPanel:f.Z},setup(){const e=D(),t=I();return{notStore:e,userStore:t}},data(){return{items:[{label:"Map",to:"/dashboard/map",role:["","CITIZEN","MANAGER"]},{label:"Missions",to:"/dashboard/missions",role:["MANAGER"]},{label:"Trucks",to:"/dashboard/trucks",role:["MANAGER"]},{label:"Complaints",to:"/dashboard/complaints",role:["MANAGER","CITIZEN"]},{label:"Bookings",to:"/dashboard/bookings",role:["CITIZEN","MANAGER"]}]}},computed:{notificationsBadge(){return this.notStore.getUnreadNumber>0?this.notStore.getUnreadNumber.toString():""}},methods:{toggleOP(e){this.$refs.op.toggle(e)},account(e){this.userStore.isLogged?this.$refs.lop.toggle(e):this.$router.push("/dashboard/account")}}};const z=(0,M.Z)(B,[["render",p],["__scopeId","data-v-76b1bced"]]);var F=z,L=s(6823),q={name:"App",components:{NavBar:F,Toast:L.Z}};const H=(0,M.Z)(q,[["render",r]]);var Y=H,G=s(7729),K=s(2531),X=s(6171),Q=s(2483),J=s(9254);const ee={class:"flex flex-column mt-3"},te={class:"flex align-content-center justify-content-end m-2"},se={style:{width:"80vw",height:"80vh"}};function ie(e,t,s,i,o,l){const a=(0,n.up)("AddCollectionPointButton"),r=(0,n.up)("l-tile-layer"),d=(0,n.up)("CollectionPointMarkers"),u=(0,n.up)("TruckMarkers"),c=(0,n.up)("MarkerComponent"),m=(0,n.up)("l-map"),p=(0,n.up)("CollectionPointSidebar"),h=(0,n.up)("TruckSidebar");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",ee,[(0,n._)("div",te,[i.userStore.isManager?((0,n.wg)(),(0,n.j4)(a,{key:0,onPick:l.activatePositionPicker,onInsert:t[0]||(t[0]=t=>{e.$router.push("/dashboard/collectionPoints/new/")})},null,8,["onPick"])):(0,n.kq)("",!0)]),(0,n._)("div",se,[(0,n.Wm)(m,{id:"map",ref:"map",modelValue:o.zoom,"onUpdate:modelValue":t[2]||(t[2]=e=>o.zoom=e),zoom:o.zoom,"onUpdate:zoom":t[3]||(t[3]=e=>o.zoom=e),"max-zoom":18,"min-zoom":5,"zoom-animation":!1,center:[o.userCoords.latitude,o.userCoords.longitude],"scroll-zoom":!1,onReady:l.mapIsReady},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,n.Wm)(d,{"cp-to-delete":l.collectionPointToDelete,onOpenSidebar:l.openSidebar,onDeleted:t[1]||(t[1]=e=>o.deleteMarker=!1)},null,8,["cp-to-delete","onOpenSidebar"]),i.userStore.isManager?((0,n.wg)(),(0,n.j4)(u,{key:0,onOpenSidebar:l.openSidebar},null,8,["onOpenSidebar"])):(0,n.kq)("",!0),i.userStore.isManager?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(c,{key:1,position:o.userCoords,"icon-path":"https://i.postimg.cc/sgsT4h63/user-icon-bg.png","icon-size":36},null,8,["position","icon-path"]))])),_:1},8,["modelValue","zoom","center","onReady"])])]),l.collectionPointIsClicked?((0,n.wg)(),(0,n.j4)(p,{key:0,"side-visibility":o.sidebarVisible,"item-id":o.markerClicked,onClosed:l.sidebarClosed,onDeleteCollectionPoint:l.closeSidebarAndDeleteMarker},null,8,["side-visibility","item-id","onClosed","onDeleteCollectionPoint"])):(0,n.kq)("",!0),l.truckIsClicked?((0,n.wg)(),(0,n.j4)(h,{key:1,"side-visibility":o.sidebarVisible,"item-id":o.markerClicked,onClosed:l.sidebarClosed},null,8,["side-visibility","item-id","onClosed"])):(0,n.kq)("",!0)],64)}var oe=s(4575);const ne={class:"flex flex-wrap align-content-center justify-content-end"},le={class:"text-base lg:text-2xl"},ae={key:0,class:"flex justify-content-around"},re={key:0,class:"flex justify-content-center"},de={key:0,class:"flex flex-column justify-content-evenly"};function ue(e,t,s,i,o,l){const a=(0,n.up)("Button"),r=(0,n.up)("ProgressSpinner"),u=(0,n.up)("DumpsterCard"),c=(0,n.up)("ScrollPanel"),m=(0,n.up)("DumpsterForm"),p=(0,n.up)("Dialog"),h=(0,n.up)("Sidebar");return(0,n.wg)(),(0,n.j4)(h,{class:"md:min-w-min",onItemUpdated:l.updateCollectionPointId,onClosed:l.hideAndEcho},(0,n.Nv)({header:(0,n.w5)((()=>[(0,n._)("div",ne,[(0,n._)("div",null,[(0,n._)("h1",le,(0,d.zw)(o.collectionPointId),1)]),i.userStore.isManager?((0,n.wg)(),(0,n.iD)("div",ae,[(0,n.Wm)(a,{class:"p-button-rounded p-button-success m-1",icon:"pi pi-plus",onClick:t[0]||(t[0]=e=>o.showDumpsterForm=!0)}),(0,n.Wm)(a,{class:"p-button-rounded p-button-danger m-1",icon:"pi pi-trash",onClick:t[1]||(t[1]=t=>e.$emit("deleteCollectionPoint"))})])):(0,n.kq)("",!0)])])),_:2},[null!==o.dumpsters?{name:"content",fn:(0,n.w5)((()=>[o.fetchingDumpster?((0,n.wg)(),(0,n.iD)("div",re,[(0,n.Wm)(r)])):(0,n.kq)("",!0),(0,n.Wm)(c,{style:{width:"100%",height:"100%"}},{default:(0,n.w5)((()=>[o.fetchingDumpster?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",de,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.dumpsters,(e=>((0,n.wg)(),(0,n.j4)(u,{key:e,class:"flex align-items-center justify-content-center m-2",dumpster:e,onDelete:t=>l.deleteDumpster(e)},null,8,["dumpster","onDelete"])))),128))]))])),_:1}),(0,n.Wm)(p,{visible:o.showDumpsterForm,"onUpdate:visible":t[3]||(t[3]=e=>o.showDumpsterForm=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"m-3",onDumpster:t[2]||(t[2]=e=>l.addDumpster(e))})])),_:1},8,["visible"])])),key:"0"}:void 0]),1032,["onItemUpdated","onClosed"])}function ce(e,t,s,i,o,l){const a=(0,n.up)("Divider"),r=(0,n.up)("Sidebar",!0);return(0,n.wg)(),(0,n.j4)(r,{visible:o.visible,"onUpdate:visible":t[0]||(t[0]=e=>o.visible=e),position:"right",class:"p-sidebar-md",onHide:l.hide},{header:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"header",{},void 0,!0),(0,n.Wm)(a)])),default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"content",{},void 0,!0)])),_:3},8,["visible","onHide"])}var me=s(4146),pe=s(3647),he={name:"SideBar",components:{Sidebar:me.Z,Divider:pe.Z},props:{sideVisibility:Boolean,itemId:{type:String,default:"-1"}},emits:["closed","itemUpdated"],data(){return{visible:this.sideVisibility}},watch:{sideVisibility(e){this.visible=e},itemId(e){this.$emit("itemUpdated",e)}},mounted(){this.$emit("itemUpdated",this.itemId)},methods:{hide(){this.$emit("closed")}}};const ge=(0,M.Z)(he,[["render",ce],["__scopeId","data-v-7b24ffc9"]]);var fe=ge;const ve=e=>((0,n.dD)("data-v-49139c87"),e=e(),(0,n.Cn)(),e),be={class:"flex flex-wrap align-content-start w-100"},we={class:"flex flex-column flex-wrap justify-content-end align-content-center"},ke={class:"text-base lg:text-2xl m-0"},_e={class:"flex justify-content-end"},Ce={class:"flex justify-content-between align-content-center"},ye={class:"flex flex-column justify-content-evenly align-content-center"},Se={class:"flex flex-column justify-content-center align-content-center"},$e=ve((()=>(0,n._)("p",null,"Occupied percentage:",-1))),Pe={class:"flex justify-content-center align-content-center"};function Ee(e,t,s,i,o,l){const a=(0,n.up)("Button"),r=(0,n.up)("Divider"),u=(0,n.up)("Tag"),c=(0,n.up)("Knob"),m=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)("div",be,[(0,n.Wm)(m,{class:""},{title:(0,n.w5)((()=>[(0,n._)("div",we,[(0,n._)("div",null,[(0,n._)("h3",ke,(0,d.zw)(s.dumpster.id),1)]),(0,n._)("div",_e,[i.userStore.isManager?((0,n.wg)(),(0,n.j4)(a,{key:0,icon:"pi pi-trash",class:"p-button-danger p-button-rounded",onClick:t[0]||(t[0]=t=>e.$emit("delete"))})):(0,n.kq)("",!0)])]),(0,n.Wm)(r)])),content:(0,n.w5)((()=>[(0,n._)("div",Ce,[(0,n._)("div",ye,[(0,n._)("p",null,[(0,n.Uk)(" Status: "),(0,n._)("span",{class:(0,d.C_)("dumpster-"+l.dumpsterStatusToValue.replace(" ","-"))},(0,d.zw)(l.dumpsterStatusToValue.toUpperCase()),3)]),(0,n._)("div",null,[(0,n.Uk)(" Type of waste: "),(0,n.Wm)(u,{class:"py-2 px-3 m-1 text-sm",value:l.dumpsterOrdinaryWaste.wasteName.replace("_"," "),rounded:!0,style:(0,d.j5)(l.cssDumpsterColor)},null,8,["value","style"])])]),(0,n._)("div",Se,[$e,(0,n._)("div",Pe,[(0,n.Wm)(c,{modelValue:l.dumpsterOccupiedPercentage,"onUpdate:modelValue":t[1]||(t[1]=e=>l.dumpsterOccupiedPercentage=e),max:100,readonly:!0},null,8,["modelValue"])])])])])),_:1})])}var Ie=s(9203),je=s(33),De={name:"DCard",components:{Card:O.Z,Tag:Ie.Z,Knob:je.Z,Divider:pe.Z,Button:g.Z},props:{dumpster:{type:Object,default:null}},emits:["delete"],setup(){const e=I();return{userStore:e}},computed:{dumpsterStatusToValue(){return this.dumpster.available?"available":"not available"},dumpsterOccupiedPercentage(){return Math.round(this.dumpster.occupiedVolume.value/this.dumpster.dumpsterType.size.capacity*100)},dumpsterOrdinaryWaste(){return this.dumpster.dumpsterType.typeOfOrdinaryWaste},cssDumpsterColor(){return{"background-color":this.dumpsterOrdinaryWaste.wasteColor.toLowerCase(),color:"PLASTIC_ALUMINIUM"===this.dumpsterOrdinaryWaste.wasteName?"black":"white"}}}};const Oe=(0,M.Z)(De,[["render",Ee],["__scopeId","data-v-49139c87"]]);var xe=Oe;const Ve={class:"flex justify-content-center"},Me=(0,n._)("br",null,null,-1),Te={class:"field"},Ue={class:"p-float-label"},Ae=(0,n._)("label",{for:"waste"},"Type Of Waste*",-1),We={key:0,class:"p-error"},Ze=(0,n._)("br",null,null,-1),Ne={class:"field"},Re={class:"p-float-label"},Be={key:0,class:"p-error"},ze=(0,n._)("br",null,null,-1);function Fe(e,t,s,o,l,a){const r=(0,n.up)("Dropdown"),u=(0,n.up)("InputNumber"),c=(0,n.up)("Button"),m=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)("div",Ve,[(0,n.Wm)(m,null,{title:(0,n.w5)((()=>[(0,n.Uk)(" Add new Dumpster ")])),content:(0,n.w5)((()=>[(0,n._)("form",{class:"p-fluid",onSubmit:t[2]||(t[2]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,n._)("div",Te,[(0,n._)("div",Ue,[(0,n.Wm)(r,{id:"waste",modelValue:l.waste,"onUpdate:modelValue":t[0]||(t[0]=e=>l.waste=e),options:l.typesOfWaste,"option-label":"name"},null,8,["modelValue","options"]),Ae]),o.v$.waste.$invalid&&l.submitted||o.v$.waste.$pending.$response?((0,n.wg)(),(0,n.iD)("small",We,(0,d.zw)(o.v$.waste.required.$message.replace("Value","Type Of Waste")),1)):(0,n.kq)("",!0)]),Ze,(0,n._)("div",Ne,[(0,n._)("div",Re,[(0,n.Wm)(u,{id:"capacity",modelValue:o.v$.capacity.$model,"onUpdate:modelValue":t[1]||(t[1]=e=>o.v$.capacity.$model=e),class:(0,d.C_)({"p-invalid":o.v$.capacity.$invalid&&l.submitted}),"min-fraction-digits":2,"max-fraction-digits":2},null,8,["modelValue","class"]),(0,n._)("label",{for:"capacity",class:(0,d.C_)({"p-error":o.v$.capacity.$invalid&&l.submitted})},"Capacity*",2)]),o.v$.capacity.$invalid&&l.submitted||o.v$.capacity.$pending.$response?((0,n.wg)(),(0,n.iD)("small",Be,(0,d.zw)(o.v$.capacity.required.$message.replace("Value","Capacity")),1)):(0,n.kq)("",!0)]),ze,(0,n.Wm)(c,{type:"submit",label:"Add",class:"mt-2",disabled:l.submitted},null,8,["disabled"])],32)])),default:(0,n.w5)((()=>[Me])),_:1})])}var Le=s(9117),qe=s(3053),He=s(6921),Ye=s(1583),Ge={name:"DumpsterForm",components:{Dropdown:He.Z,Button:g.Z,Card:O.Z,InputNumber:Ye.Z},emits:["dumpster"],setup(){const e=I();return{v$:(0,qe.Xw)(),userStore:e}},data(){return{waste:null,capacity:0,typesOfWaste:[{name:"PLASTIC_ALUMINIUM"},{name:"GLASS"},{name:"PAPER"},{name:"ORGANIC"}],submitted:null}},validations(){return{capacity:{required:Le.C1},waste:{required:Le.C1}}},methods:{handleSubmit(e){this.submitted=!0,e&&this.$emit("dumpster",{waste:this.waste,capacity:this.capacity})}}};const Ke=(0,M.Z)(Ge,[["render",Fe]]);var Xe=Ke,Qe=s(2419),Je=s(7267),et={name:"CollectionPointSidebar",components:{DumpsterForm:Xe,Dialog:Qe.Z,Sidebar:fe,DumpsterCard:xe,Button:g.Z,ProgressSpinner:Je.Z,ScrollPanel:x.Z},emits:["deleteCollectionPoint","closed"],setup(){const e=I();return{userStore:e}},data(){return{showDumpsterForm:!1,collectionPointId:null,fetchingDumpster:!0,dumpstersPolling:null,dumpsters:[]}},methods:{fetchCollectionPointDumpsters(){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/collectionpoints/"+this.collectionPointId+"/dumpsters",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token"}}).then((e=>{console.log(e.data),this.fetchingDumpster=!1,this.dumpsters=e.data}))},updateCollectionPointId(e){this.collectionPointId=e,this.fetchingDumpster=!0,this.fetchCollectionPointDumpsters(),this.dumpstersPolling=setInterval((()=>this.fetchCollectionPointDumpsters()),3e3)},deleteDumpster(e){clearInterval(this.dumpstersPolling),P.ZP["delete"]({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/dumpsters/"+e.id).then((t=>{console.log(t),this.dumpsters.splice(this.dumpsters.indexOf(e),1),this.dumpstersPolling=setInterval((()=>this.fetchCollectionPointDumpsters()),3e3)}))},addDumpster(e){this.showDumpsterForm=!1;let t={dumpster:{capacity:e.capacity,wasteName:e.waste.name},collectionPointId:this.collectionPointId};clearInterval(this.dumpstersPolling),P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/dumpsters",t).then((e=>{if(200===e.status){console.log(e.data);var t=[...this.dumpsters];t.push(e.data),t=t.sort(((e,t)=>e.id.localeCompare(t.id,{numeric:!0}))),this.dumpsters=t,this.dumpstersPolling=setInterval((()=>this.fetchCollectionPointDumpsters()),3e3)}}))},hideAndEcho(){clearInterval(this.dumpstersPolling),this.dumpstersPolling=null,this.$emit("closed")}}};const tt=(0,M.Z)(et,[["render",ue]]);var st=tt;const it=e=>((0,n.dD)("data-v-585cccc3"),e=e(),(0,n.Cn)(),e),ot=it((()=>(0,n._)("p",null,null,-1))),nt=it((()=>(0,n._)("p",null,"Occupied percentage:",-1))),lt={class:"flex justify-content-between"},at=it((()=>(0,n._)("h3",null,"Go to mission details",-1)));function rt(e,t,s,i,o,l){const a=(0,n.up)("ProgressBar"),r=(0,n.up)("Button"),u=(0,n.up)("Sidebar");return(0,n.wg)(),(0,n.j4)(u,{onItemUpdated:l.updateTruckId},{header:(0,n.w5)((()=>[(0,n._)("h1",null,(0,d.zw)(o.truckId),1),ot])),content:(0,n.w5)((()=>[nt,(0,n.Wm)(a,{value:l.truckOccupiedPercentage},{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(l.truckOccupiedPercentage>7?l.truckOccupiedPercentage+"%":""),1)])),_:1},8,["value"]),(0,n._)("div",lt,[at,(0,n.Wm)(r,{icon:"pi pi-arrow-right",class:"p-button-rounded m-2",onClick:l.goToMissionDetails},null,8,["onClick"])])])),_:1},8,["onItemUpdated"])}var dt=s(1492),ut={name:"TruckSidebar",components:{Sidebar:fe,ProgressBar:dt.Z,Button:g.Z},emits:["exited"],data(){return{truckId:null,truck:null,truckPolling:null}},computed:{truckOccupiedPercentage(){return null!==this.truck?Math.round(this.truck.occupiedVolume.value/this.truck.capacity*100):0}},methods:{updateTruckId(e){this.truckId=e,this.getTruckById(),null!=this.truckPolling&&clearInterval(this.truckPolling),setInterval((()=>this.getTruckById()),3e3)},goToMissionDetails(){this.$emit("exited"),this.$router.push("/dashboard/missions/"+this.truckId)},getTruckById(){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_TRUCK_MICROSERVICE+"/trucks/"+this.truckId,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token"}}).then((e=>{this.truck=e.data}))}}};const ct=(0,M.Z)(ut,[["render",rt],["__scopeId","data-v-585cccc3"]]);var mt=ct;function pt(e,t,s,i,o,l){const a=(0,n.up)("MarkerComponent");return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.collectionPoints,(t=>((0,n.wg)(),(0,n.j4)(a,{key:t,position:t.position,"icon-path":"https://i.postimg.cc/PfCmTmb2/collection-point.png",onClick:s=>e.$emit("open-sidebar",t.id)},null,8,["position","icon-path","onClick"])))),128)}function ht(e,t,s,i,o,l){const a=(0,n.up)("l-marker");return(0,n.wg)(),(0,n.j4)(a,{ref:"marker","lat-lng":[s.position.latitude,s.position.longitude],icon:l.createIcon},null,8,["lat-lng","icon"])}var gt=s(3153),ft=s.n(gt),vt={name:"MarkerComponent",components:{LMarker:oe.$R},props:{position:{type:Object,default:{latitude:0,longitude:0},require:!0},iconPath:{type:String},iconSize:{type:Number,require:!1,default:32}},computed:{createIcon(){return ft().icon({iconUrl:this.iconPath,iconSize:[this.iconSize,this.iconSize]})}}};const bt=(0,M.Z)(vt,[["render",ht]]);var wt=bt,kt={name:"CollectionPointMarkers",components:{MarkerComponent:wt},props:{cpToDelete:{type:String,default:null}},emits:["open-sidebar","deleted"],data(){return{collectionPoints:[]}},watch:{cpToDelete(e){null!=e&&(this.collectionPoints=this.collectionPoints.filter((t=>t.id!==e)),this.$emit("deleted"),P.ZP["delete"]({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/collectionpoints/"+e).then((e=>console.log(e))))}},mounted(){this.fetchCollectionPoints()},methods:{fetchCollectionPoints(){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/collectionpoints",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token"}}).then((e=>{this.collectionPoints=e.data}))}}};const _t=(0,M.Z)(kt,[["render",pt]]);var Ct=_t;function yt(e,t,s,i,o,l){const a=(0,n.up)("MarkerComponent");return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.trucks,(t=>((0,n.wg)(),(0,n.j4)(a,{key:t,position:t.position,"icon-path":"https://i.postimg.cc/YqCCTXyV/lorry.png","icon-size":48,onClick:s=>e.$emit("open-sidebar",t.truckId)},null,8,["position","icon-path","onClick"])))),128)}var St={name:"CollectionPointMarkers",components:{MarkerComponent:wt},emits:["open-sidebar"],data(){return{trucks:[],truckPolling:null}},mounted(){this.getTrucksInMission(),this.truckPolling=setInterval((()=>this.updateTruckInMission()),2e3)},unmounted(){clearInterval(this.truckPolling)},methods:{getTrucksInMission(){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_TRUCK_MICROSERVICE+"/trucks/inMission/",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token"}}).then((e=>{this.trucks=e.data}))},updateTruckInMission(){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_TRUCK_MICROSERVICE+"/trucks/inMission/",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token"}}).then((e=>{e.data.forEach((e=>{const t=this.trucks.find((t=>t.truckId===e.truckId));t.position!==e.position&&(t.position=e.position)}))}))}}};const $t=(0,M.Z)(St,[["render",yt]]);var Pt=$t;function Et(e,t,s,i,o,l){const a=(0,n.up)("SplitButton");return(0,n.wg)(),(0,n.j4)(a,{model:o.items,label:"Add new Collection Point"},null,8,["model"])}var It=s(8959),jt={name:"AddCollectionPointButton",components:{SplitButton:It.Z},emits:["pick","insert"],data(){return{items:[{label:"By picking the position",command:()=>this.$emit("pick")},{label:"By entering the position",command:()=>this.$emit("insert")}]}}};const Dt=(0,M.Z)(jt,[["render",Et]]);var Ot=Dt,xt={name:"MapComponent",components:{MarkerComponent:wt,CollectionPointMarkers:Ct,TruckSidebar:mt,CollectionPointSidebar:st,TruckMarkers:Pt,AddCollectionPointButton:Ot,LMap:oe.iA,LTileLayer:oe.Hw},setup(){const e=I();return{userStore:e}},data(){return{zoom:13,map:null,userCoords:{latitude:44.14781,longitude:12.23564},deleteMarker:!1,sidebarVisible:!1,markerClicked:null,locationWatcher:null}},computed:{collectionPointIsClicked(){return null!=this.markerClicked&&this.markerClicked.startsWith("C")},truckIsClicked(){return null!=this.markerClicked&&this.markerClicked.startsWith("T")},collectionPointToDelete(){return this.deleteMarker&&this.collectionPointIsClicked?this.markerClicked:null}},unmounted(){null!==this.locationWatcher&&navigator.geolocation.clearWatch(this.locationWatcher)},methods:{mapIsReady(){this.map=this.$refs.map.leafletObject,null!==this.map&&(this.map.scrollWheelZoom.disable(),navigator.geolocation&&(this.locationWatcher=navigator.geolocation.watchPosition((e=>{this.userCoords=e.coords,this.map.flyTo([this.userCoords.latitude,this.userCoords.longitude])}))))},openSidebar(e){this.markerClicked=e,this.sidebarVisible=!0},sidebarClosed(){this.sidebarVisible=!1},activatePositionPicker(){null!==this.map&&(document.getElementById("map").style.cursor="crosshair",this.map.on("click",(e=>{document.getElementById("map").style.cursor="",this.$router.push(`/dashboard/collectionPoints/new/${e.latlng.lat}/${e.latlng.lng}`)})))},closeSidebarAndDeleteMarker(){this.sidebarVisible=!1,this.deleteMarker=!0}}};const Vt=(0,M.Z)(xt,[["render",ie],["__scopeId","data-v-faaca4e4"]]);var Mt=Vt;const Tt={key:1,class:"flex flex-column w-full"},Ut={class:"flex justify-content-between"},At={class:"col-12 md:col-4",style:{"background-color":"#EFF3F8"}},Wt={style:{"text-transform":"capitalize"}},Zt={style:{margin:"0","list-style-type":"none","text-align":"start"}},Nt={key:0},Rt={key:0};function Bt(e,t,s,i,o,l){const a=(0,n.up)("ProgressSpinner"),r=(0,n.up)("Button"),u=(0,n.up)("ComplaintFilterPanel"),c=(0,n.up)("OverlayPanel"),m=(0,n.up)("router-link"),p=(0,n.up)("Divider"),h=(0,n.up)("Card"),g=(0,n.up)("DataView");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i.complaintsStore.isFetchingComplaints?((0,n.wg)(),(0,n.j4)(a,{key:0})):(0,n.kq)("",!0),i.complaintsStore.isFetchingComplaints?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",Tt,[(0,n.Wm)(g,{value:l.filteredComplaints,layout:"grid",paginator:!0,rows:8,class:"m-5"},{header:(0,n.w5)((()=>[(0,n._)("div",Ut,[(0,n.Wm)(r,{class:"p-button-text p-button-rounded",icon:"pi pi-filter",onClick:t[0]||(t[0]=t=>e.$refs.fop.toggle(t))}),(0,n.Wm)(c,{ref:"fop"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{filters:o.filters,onFilters:l.applyFilters},null,8,["filters","onFilters"])])),_:1},512),i.userStore.isCitizen?((0,n.wg)(),(0,n.j4)(m,{key:0,to:"/dashboard/complaints/new"},{default:(0,n.w5)((({href:e,navigate:t})=>[(0,n.Wm)(r,{href:e,label:"Create New",class:"p-button-raised",onClick:t},null,8,["href","onClick"])])),_:1})):(0,n.kq)("",!0)])])),grid:(0,n.w5)((e=>[(0,n._)("div",At,[(0,n.Wm)(h,{class:"m-3 md:mx-5 md:mt-3"},{title:(0,n.w5)((()=>[(0,n._)("p",Wt,(0,d.zw)(e.data.title),1)])),subtitle:(0,n.w5)((()=>[(0,n._)("ul",Zt,[(0,n._)("li",null," ID: "+(0,d.zw)(e.data.id),1),(0,n._)("li",null,[(0,n.Uk)(" Status: "),(0,n._)("span",{class:(0,d.C_)("complaint-"+e.data.status.toLowerCase())},(0,d.zw)(e.data.status),3)]),i.userStore.isManager?((0,n.wg)(),(0,n.iD)("li",Nt," Issuer: "+(0,d.zw)(e.data.issuer),1)):(0,n.kq)("",!0)])])),content:(0,n.w5)((()=>[(0,n.Wm)(p),(0,n.Uk)(" "+(0,d.zw)(e.data.message),1)])),footer:(0,n.w5)((()=>[i.userStore.isManager&&"OPEN"===e.data.status?((0,n.wg)(),(0,n.iD)("div",Rt,[(0,n.Wm)(p),(0,n.Wm)(r,{onClick:t=>i.complaintsStore.closeComplaint(e.data.id)},{default:(0,n.w5)((()=>[(0,n.Uk)(" CLOSE ")])),_:2},1032,["onClick"])])):(0,n.kq)("",!0)])),_:2},1024)])])),empty:(0,n.w5)((()=>[(0,n.Uk)(" No Complaints to Show ")])),_:1},8,["value"])]))],64)}var zt=s(6464);const Ft=e=>((0,n.dD)("data-v-4167e4a7"),e=e(),(0,n.Cn)(),e),Lt={class:"outer-container"},qt=Ft((()=>(0,n._)("h5",null,"STATUS",-1))),Ht={class:"field-checkbox"},Yt=Ft((()=>(0,n._)("label",{class:"complaint-open",for:"state1"},"OPEN",-1))),Gt={class:"field-checkbox"},Kt=Ft((()=>(0,n._)("label",{class:"complaint-closed",for:"state2"},"CLOSED",-1))),Xt={key:0},Qt=Ft((()=>(0,n._)("h5",null,"ISSUER",-1))),Jt={class:"field-checkbox"},es=Ft((()=>(0,n._)("label",{for:"issuer1"},"USER",-1))),ts={class:"field-checkbox"},ss=Ft((()=>(0,n._)("label",{for:"issuer1"},"DUMPSTER",-1)));function is(e,t,s,i,o,l){const a=(0,n.up)("Checkbox"),r=(0,n.up)("Divider"),d=(0,n.up)("Button");return(0,n.wg)(),(0,n.iD)("div",Lt,[qt,(0,n._)("div",Ht,[(0,n.Wm)(a,{modelValue:o.statusFilters,"onUpdate:modelValue":t[0]||(t[0]=e=>o.statusFilters=e),name:"state","input-id":"state1",value:"OPEN"},null,8,["modelValue"]),Yt]),(0,n._)("div",Gt,[(0,n.Wm)(a,{modelValue:o.statusFilters,"onUpdate:modelValue":t[1]||(t[1]=e=>o.statusFilters=e),name:"state","input-id":"state2",value:"CLOSED"},null,8,["modelValue"]),Kt]),i.userStore.isManager?((0,n.wg)(),(0,n.iD)("div",Xt,[Qt,(0,n._)("div",Jt,[(0,n.Wm)(a,{modelValue:o.issuers,"onUpdate:modelValue":t[2]||(t[2]=e=>o.issuers=e),name:"issuer","input-id":"issuer1",value:"USER"},null,8,["modelValue"]),es]),(0,n._)("div",ts,[(0,n.Wm)(a,{modelValue:o.issuers,"onUpdate:modelValue":t[3]||(t[3]=e=>o.issuers=e),name:"issuer","input-id":"issuer2",value:"DUMPSTER"},null,8,["modelValue"]),ss])])):(0,n.kq)("",!0),(0,n.Wm)(r),(0,n.Wm)(d,{class:"p-button-sm",onClick:t[4]||(t[4]=t=>e.$emit("filters",{statusFilters:o.statusFilters,issuers:o.issuers}))},{default:(0,n.w5)((()=>[(0,n.Uk)(" Apply ")])),_:1})])}var os=s(3602),ns={name:"ComplaintFilterPanel",components:{Checkbox:os.Z,Divider:pe.Z,Button:g.Z},props:{filters:{type:Object,require:!0,default:null}},emits:["filters"],setup(){const e=I();return{userStore:e}},data(){return{statusFilters:this.filters.statusFilters,issuers:this.filters.issuers}}};const ls=(0,M.Z)(ns,[["render",is],["__scopeId","data-v-4167e4a7"]]);var as=ls;const rs=(0,o.Q_)("complaint",{state:()=>({complaints:[],isFetchingComplaints:!0}),getters:{},actions:{closeComplaint(e){this.complaints.find((t=>t.id===e)).status="CLOSED",P.ZP.put({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_COMPLAINT_MICROSERVICE+"/complaints/"+e)},fetchComplaints(){this.isFetchingComplaints=!0,P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_COMPLAINT_MICROSERVICE+"/complaints").then((e=>{this.complaints=e.data.reverse(),this.isFetchingComplaints=!1}))},fetchUserComplaints(e){this.isFetchingComplaints=!0,P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_COMPLAINT_MICROSERVICE+"/complaints").then((t=>{this.complaints=t.data.filter((t=>t.ownerId===e)).reverse(),this.isFetchingComplaints=!1}))}}});var ds={name:"ComplaintList",components:{ComplaintFilterPanel:as,OverlayPanel:f.Z,Button:g.Z,DataView:zt.Z,Card:O.Z,Divider:pe.Z,ProgressSpinner:Je.Z},setup(){const e=I(),t=rs();return{userStore:e,complaintsStore:t}},data(){return{filters:{statusFilters:[],issuers:[]}}},computed:{filteredComplaints(){return this.complaintsStore.complaints.filter((e=>0===this.filters.statusFilters.length||this.filters.statusFilters.includes(e.status))).filter((e=>0===this.filters.issuers.length||this.filters.issuers.includes(e.issuer)))}},created(){this.userStore.isCitizen?this.complaintsStore.fetchUserComplaints(this.userStore.userId):this.userStore.isManager&&this.complaintsStore.fetchComplaints()},methods:{applyFilters(e){this.filters=e,this.$refs.fop.hide()}}};const us=(0,M.Z)(ds,[["render",Bt],["__scopeId","data-v-3370a503"]]);var cs=us;const ms={class:"grid"},ps={class:"col-5 flex align-items-center justify-content-center"},hs={class:"col-2"},gs=(0,n._)("b",null,"OR",-1),fs={class:"col-5 flex align-items-center justify-content-center"};function vs(e,t,s,i,o,l){const a=(0,n.up)("LoginForm"),r=(0,n.up)("Divider"),d=(0,n.up)("SingUpButton"),u=(0,n.up)("Card"),c=(0,n.up)("MobileAccount");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i.userStore.isLogged?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(u,{key:0,class:"hidden lg:block lg:w-8 lg:m-5"},{content:(0,n.w5)((()=>[(0,n._)("div",ms,[(0,n._)("div",ps,[(0,n.Wm)(a)]),(0,n._)("div",hs,[(0,n.Wm)(r,{layout:"vertical"},{default:(0,n.w5)((()=>[gs])),_:1})]),(0,n._)("div",fs,[(0,n.Wm)(d)])])])),_:1})),(0,n.Wm)(c,{class:"block lg:hidden"})],64)}const bs={class:"field"},ws={key:0,class:"p-error"},ks={class:"field"},_s={key:0,class:"p-error"},Cs={key:1,class:"p-error"};function ys(e,t,s,o,l,a){const r=(0,n.up)("InputText"),u=(0,n.up)("Password"),c=(0,n.up)("Button");return(0,n.wg)(),(0,n.iD)("form",{class:"p-fluid",onSubmit:t[2]||(t[2]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,n._)("div",bs,[(0,n._)("label",{for:"email",class:(0,d.C_)({"p-error":o.v$.email.$invalid&&l.submitted})},"Email",2),(0,n.Wm)(r,{id:"email",modelValue:o.v$.email.$model,"onUpdate:modelValue":t[0]||(t[0]=e=>o.v$.email.$model=e),class:(0,d.C_)({"p-invalid":o.v$.email.$invalid&&l.submitted}),type:"text"},null,8,["modelValue","class"]),o.v$.email.$invalid&&l.submitted||o.v$.email.$pending.$response?((0,n.wg)(),(0,n.iD)("small",ws,(0,d.zw)(o.v$.email.required.$message.replace("Value","Email")),1)):(0,n.kq)("",!0)]),(0,n._)("div",ks,[(0,n._)("label",{for:"password",class:(0,d.C_)({"p-error":o.v$.password.$invalid&&l.submitted})},"Password",2),(0,n.Wm)(u,{id:"password",modelValue:l.password,"onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),class:(0,d.C_)({"p-error":o.v$.password.$invalid&&l.submitted}),feedback:!1},null,8,["modelValue","class"]),o.v$.password.$invalid&&l.submitted||o.v$.password.$pending.$response?((0,n.wg)(),(0,n.iD)("small",_s,(0,d.zw)(o.v$.password.required.$message.replace("Value","Password")),1)):(0,n.kq)("",!0),l.error?((0,n.wg)(),(0,n.iD)("small",Cs,"Username or Password are incorrect")):(0,n.kq)("",!0)]),(0,n.Wm)(c,{type:"submit",label:"Login"})],32)}var Ss=s(6709),$s=s(3789),Ps={name:"LoginForm",components:{InputText:Ss.Z,Button:g.Z,Password:$s.Z},setup(){const e=I(),t=j();return{v$:(0,qe.Xw)(),userStore:e,socketStore:t}},data(){return{email:"",password:"",submitted:null,error:!1}},validations(){return{email:{required:Le.C1,email:Le.Do},password:{required:Le.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={username:this.email,password:this.password};console.log(e),P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_AUTHENTICATION_MICROSERVICE+"/authentication/login",e).then((e=>{200===e.status&&(console.log("Connetto..."),this.userStore.login(e.data.user),this.socketStore.connect(this.userStore.userId),this.$router.push("/dashboard/map/"))})).catch((e=>{console.log("ERROR: "+e),console.log("account non trovato"),this.password="",this.submitted=!1,this.error=!0}))}}}};const Es=(0,M.Z)(Ps,[["render",ys],["__scopeId","data-v-5147d639"]]);var Is=Es;const js={class:"flex flex-column"},Ds=(0,n._)("b",null,"OR",-1);function Os(e,t,s,i,o,l){const a=(0,n.up)("LoginForm"),r=(0,n.up)("Divider"),d=(0,n.up)("SingUpButton"),u=(0,n.up)("Card");return(0,n.wg)(),(0,n.j4)(u,{class:"mt-5"},{content:(0,n.w5)((()=>[(0,n._)("div",js,[(0,n.Wm)(a),(0,n.Wm)(r,{class:"justify-content-center"},{default:(0,n.w5)((()=>[Ds])),_:1}),(0,n.Wm)(d)])])),_:1})}function xs(e,t,s,i,o,l){const a=(0,n.up)("Button"),r=(0,n.up)("router-link");return(0,n.wg)(),(0,n.j4)(r,{to:"/dashboard/account/registration"},{default:(0,n.w5)((({href:e,navigate:t})=>[(0,n.Wm)(a,{href:e,label:"Sign Up",icon:"pi pi-user-plus",class:"p-button-success",onClick:t},null,8,["href","onClick"])])),_:1})}var Vs={name:"SingUpButton",components:{Button:g.Z}};const Ms=(0,M.Z)(Vs,[["render",xs],["__scopeId","data-v-9f5dbe48"]]);var Ts=Ms,Us={name:"MobileAccount",components:{SingUpButton:Ts,Divider:pe.Z,LoginForm:Is,Card:O.Z}};const As=(0,M.Z)(Us,[["render",Os]]);var Ws=As,Zs={name:"AccountComponent",components:{SingUpButton:Ts,MobileAccount:Ws,LoginForm:Is,Divider:pe.Z,Card:O.Z},setup(){const e=I(),t=j(),s=D();return{userStore:e,socketStore:t,notStore:s}}};const Ns=(0,M.Z)(Zs,[["render",vs]]);var Rs=Ns;const Bs=e=>((0,n.dD)("data-v-624481d4"),e=e(),(0,n.Cn)(),e),zs={class:"flex flex-column md:justify-content-center card-container md:m-5 w-full"},Fs={style:{"list-style-type":"none","text-align":"left"}},Ls={key:2,class:"flex justify-content-center align-items-center md:w-full"},qs={class:"flex md:w-10"},Hs={class:"mb-3"},Ys={class:"m-0 md:m-3 text-base md:text-3xl"},Gs={class:"md:mt-3 md:pt-3"},Ks={class:"text-xs md:text-2xl"},Xs=Bs((()=>(0,n._)("i",{class:"pi pi-map-marker text-xs md:text-xl"},null,-1)));function Qs(e,t,s,i,o,l){const a=(0,n.up)("ProgressSpinner"),r=(0,n.up)("Card"),u=(0,n.up)("Button"),c=(0,n.up)("Divider"),m=(0,n.up)("Timeline");return(0,n.wg)(),(0,n.iD)("div",zs,[0===o.steps.length?((0,n.wg)(),(0,n.j4)(a,{key:0})):(0,n.kq)("",!0),null!==o.currentMission?((0,n.wg)(),(0,n.j4)(r,{key:1,class:"m-3"},{title:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(o.currentMission.missionId),1)])),content:(0,n.w5)((()=>[(0,n._)("ul",Fs,[(0,n._)("li",null," Type of Mission: "+(0,d.zw)(o.currentMission.typeOfMission),1),(0,n._)("li",null," Type of Waste: "+(0,d.zw)(o.currentMission.typeOfWaste.wasteName),1),(0,n._)("li",null," Truck id: "+(0,d.zw)(o.currentMission.truckId),1)])])),_:1})):(0,n.kq)("",!0),o.steps.length>0?((0,n.wg)(),(0,n.iD)("div",Ls,[(0,n._)("div",qs,[(0,n.Wm)(m,{value:o.steps.filter((e=>e.show)).reverse(),align:"alternate",class:"w-full"},{marker:(0,n.w5)((e=>[(0,n.Wm)(u,{class:"p-button-rounded",icon:e.item.icon,style:(0,d.j5)({backgroundColor:e.item.color,borderColor:e.item.color}),onClick:t=>l.show(e.item.id)},null,8,["icon","style","onClick"])])),content:(0,n.w5)((e=>[(0,n._)("div",Hs,["next"!==e.item.id&&"prev"!==e.item.id&&"start"!==e.item.id&&"end"!==e.item.id?((0,n.wg)(),(0,n.j4)(r,{key:0},{title:(0,n.w5)((()=>[(0,n._)("div",Ys," STEP #"+(0,d.zw)(e.item.id),1),(0,n.Wm)(c,{class:"hidden md:block"})])),content:(0,n.w5)((()=>[(0,n._)("div",Gs,[(0,n._)("span",Ks,[Xs,(0,n.Uk)(" "+(0,d.zw)(e.item.stepId),1)])])])),_:2},1024)):(0,n.kq)("",!0)])])),_:1},8,["value"])])])):(0,n.kq)("",!0)])}s(3048);var Js=s(4348);const ei=(0,o.Q_)("mission",{state:()=>({missions:[],fetchingMissions:!0}),getters:{},actions:{fetchMissions(){return P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_MISSION_MICROSERVICE+"/missions/").then((e=>(200===e.status?(this.fetchingMissions=!1,this.missions=e.data):console.log(e),Promise.resolve(e.data))))},getOrFetchMissions(){return 0===this.missions.length?this.fetchMissions():Promise.resolve(this.missions)}}});var ti={name:"MissionDetails",components:{Timeline:Js.Z,Card:O.Z,Button:g.Z,ProgressSpinner:Je.Z,Divider:pe.Z},setup(){const e=ei();return{missionsStore:e}},data(){return{steps:[],currentMission:null,id:null,extremes:null,polling:null}},mounted(){this.id="id"in this.$route.params?this.$route.params.id:this.$route.params.truckId,this.missionsStore.fetchMissions().then((e=>{this.findMissionAndSetSteps(e,this.id),this.polling=setInterval((()=>{this.steps.length>0&&this.steps.every((e=>"show"in e))&&this.missionsStore.fetchMissions().then((e=>{const t=this.findMissionFromId(e,this.id).missionSteps;this.setStepsUI(t),t.forEach((e=>{const t=this.steps.find((t=>t.stepId===e.stepId));null!=t&&(e.show=t.show)}));let s=t.filter((e=>!e.completed))[0];null!==s&&void 0!==s&&(s.icon="pi pi-clock",s.color="#ffab00",s.show=!0),this.steps.splice(1,t.length,...t)}))}),3e3)}))},unmounted(){clearInterval(this.polling),this.steps=[]},methods:{show(e){"next"!==e&&"prev"!==e||(this.steps.filter((t=>"next"===e?!t.completed:t.completed)).forEach((e=>e.show=!0)),"next"===e?this.steps.splice(-1,1,{id:"end",icon:"pi pi-check-circle",color:"#33437e",show:!0}):this.steps.splice(0,1,{id:"start",icon:"",color:"#33437e",show:!0}))},findMissionAndSetSteps(e,t){this.currentMission=this.findMissionFromId(e,t),this.steps=this.currentMission.missionSteps,this.updateSteps()},setStepsUI(e){for(let t=0;t<e.length;t++){const s=e[t];s.id=t,s.icon=s.completed?"pi pi-check-circle":"pi pi-circle",s.color=s.completed?"#9cff57":"lightgray",s.show=!1}},updateSteps(){this.setStepsUI(this.steps);let e=this.manageCompletedSteps(),t=this.manageUncompletedSteps();null!==this.extremes&&"id"in this.extremes.start&&"id"in this.extremes.end&&(e=this.extremes.start,"start"===e.id&&this.getCompletedSteps().forEach((e=>e.show=!0)),t=this.extremes.end,"end"===t.id&&this.getUncompletedSteps().forEach((e=>e.show=!0))),this.steps.unshift(e),this.steps.push(t)},getCompletedSteps(){return this.steps.filter((e=>e.completed))},getUncompletedSteps(){return this.steps.filter((e=>!e.completed))},manageCompletedSteps(){let e={id:"start",icon:"",color:"#33437e",show:!0},t=this.steps.findLast((e=>e.completed));return void 0!==t&&(t["show"]=!0),this.getCompletedSteps().length>1&&(e.id="prev",e.icon="pi pi-angle-double-down",e.color="#33437e"),e},manageUncompletedSteps(){if(0===this.getUncompletedSteps().length)return{id:"end",icon:"pi pi-check-circle",color:"#33437e",show:!0};{let e=this.getUncompletedSteps()[0];if(e.icon="pi pi-clock",e.color="#ffab00",e.show=!0,this.getUncompletedSteps().length>1){let e=this.getUncompletedSteps()[1];if(e.show=!0,this.getUncompletedSteps().length>2)return{id:"next",icon:"pi pi-angle-double-up",color:"#33437e",show:!0}}}},findMissionFromId(e,t){return t.startsWith("Truck")?e.find((e=>e.truckId===t)):e.find((e=>e.missionId===t))},updateMissions(e){console.log("Update for "+e),this.fetchingMissions||e!==this.currentMission.missionId||(console.log("UPDATE"),P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_MISSION_MICROSERVICE+"/missions/").then((t=>{if(200===t.status){let s=this.steps[0],i=this.steps[this.steps.length-1];this.extremes={start:s,end:i},this.missions=t.data,this.setCurrentMission(e)}})))}}};const si=(0,M.Z)(ti,[["render",Qs],["__scopeId","data-v-624481d4"]]);var ii=si;const oi=e=>((0,n.dD)("data-v-143a3685"),e=e(),(0,n.Cn)(),e),ni={class:"flex flex-column w-full",style:{"text-align":"center"}},li={class:"flex justify-content-between"},ai={class:"flex justify-content-center col-12 md:col-4",style:{"background-color":"#EFF3F8"}},ri=oi((()=>(0,n._)("p",null,"At Home Collection Booking",-1))),di={style:{"list-style-type":"none","text-align":"left"}};function ui(e,t,s,i,o,l){const a=(0,n.up)("Button"),r=(0,n.up)("router-link"),u=(0,n.up)("BookingFilterPanel"),c=(0,n.up)("OverlayPanel"),m=(0,n.up)("Card"),p=(0,n.up)("DataView");return(0,n.wg)(),(0,n.iD)("div",ni,[(0,n.Wm)(p,{value:l.filteredBookings,layout:"grid",paginator:!0,rows:9,class:"m-3 md:m-5"},{header:(0,n.w5)((()=>[(0,n._)("div",li,[(0,n.Wm)(a,{class:"p-button-text p-button-rounded",icon:"pi pi-filter",onClick:t[0]||(t[0]=t=>e.$refs.fop.toggle(t))}),i.userStore.isCitizen?((0,n.wg)(),(0,n.j4)(r,{key:0,to:"/dashboard/bookings/new"},{default:(0,n.w5)((({href:e,navigate:t})=>[(0,n.Wm)(a,{href:e,label:"Create New",class:"p-button-raised",onClick:t},null,8,["href","onClick"])])),_:1})):(0,n.kq)("",!0)]),(0,n.Wm)(c,{ref:"fop",class:"h-20rem m-0 p-0"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{filters:o.filters,onFilters:l.applyFilters},null,8,["filters","onFilters"])])),_:1},512)])),grid:(0,n.w5)((e=>[(0,n._)("div",ai,[(0,n.Wm)(m,{class:"mt-2 md:my-3 w-full md:w-9"},{title:(0,n.w5)((()=>[ri])),subtitle:(0,n.w5)((()=>[(0,n.Uk)(" ID: "+(0,d.zw)(e.data._id),1)])),content:(0,n.w5)((()=>[(0,n._)("ul",di,[(0,n._)("li",null,[(0,n.Uk)(" Status: "),(0,n._)("span",{class:(0,d.C_)("booking-status-"+e.data.status.toLowerCase())},(0,d.zw)(e.data.status),3)]),(0,n._)("li",null," Waste Type: "+(0,d.zw)(e.data.typeOfWaste.wasteName),1)]),(0,n._)("p",null,"MADE ON "+(0,d.zw)(l.printPrettyDate(e.data.datetime)),1)])),_:2},1024)])])),empty:(0,n.w5)((()=>[(0,n.Uk)(" No Bookings to Show ")])),_:1},8,["value"])])}var ci=s(6797),mi=s.n(ci);const pi=e=>((0,n.dD)("data-v-768104ba"),e=e(),(0,n.Cn)(),e),hi=pi((()=>(0,n._)("h5",null,"STATUS",-1))),gi=["for"],fi=pi((()=>(0,n._)("h5",null,"TYPE OF WASTE",-1))),vi=["for"],bi={class:"flex justify-content-center"};function wi(e,t,s,i,o,l){const a=(0,n.up)("Checkbox"),r=(0,n.up)("ScrollPanel"),u=(0,n.up)("Divider"),c=(0,n.up)("Button");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(r,{class:"outer-container h-13rem p-0 m-0 w-full"},{default:(0,n.w5)((()=>[hi,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.states,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"field-checkbox"},[(0,n.Wm)(a,{modelValue:o.statusFilters,"onUpdate:modelValue":t[0]||(t[0]=e=>o.statusFilters=e),name:"state","input-id":"state"+e.toLowerCase(),value:e},null,8,["modelValue","input-id","value"]),(0,n._)("label",{class:(0,d.C_)("booking-status-"+e.toLowerCase()),for:"state"+e.toLowerCase()},(0,d.zw)(e),11,gi)])))),128)),fi,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.typesOfWaste,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"field-checkbox"},[(0,n.Wm)(a,{modelValue:o.wasteFilters,"onUpdate:modelValue":t[1]||(t[1]=e=>o.wasteFilters=e),name:"waste","input-id":"waste"+e.toLowerCase(),value:e},null,8,["modelValue","input-id","value"]),(0,n._)("label",{for:"waste"+e.toLowerCase()},(0,d.zw)(e),9,vi)])))),128))])),_:1}),(0,n.Wm)(u,{class:"mt-2"}),(0,n._)("div",bi,[(0,n.Wm)(c,{label:"Apply",class:"p-button-sm",onClick:t[2]||(t[2]=t=>e.$emit("filters",{statusFilters:o.statusFilters,wasteFilters:o.wasteFilters}))})])],64)}var ki={name:"ComplaintFilterPanel",components:{Checkbox:os.Z,Divider:pe.Z,Button:g.Z,ScrollPanel:x.Z},props:{filters:{type:Object,require:!0,default:null}},emits:["filters"],setup(){const e=I();return{userStore:e}},data(){return{statusFilters:this.filters.statusFilters,wasteFilters:this.filters.wasteFilters,states:["PENDING","ASSIGNED","COMPLETED"],typesOfWaste:["TWIGS","WASTE OIL","IRON","ELECTRONICS","CLOTHES","OTHER"]}}};const _i=(0,M.Z)(ki,[["render",wi],["__scopeId","data-v-768104ba"]]);var Ci=_i,yi={name:"BookingList",components:{BookingFilterPanel:Ci,Button:g.Z,DataView:zt.Z,Card:O.Z,OverlayPanel:f.Z},setup(){const e=I(),t=E();return{userStore:e,bookingStore:t}},data(){return{bookings:[],filters:{statusFilters:[],wasteFilters:[]}}},computed:{filteredBookings(){return this.bookingStore.bookings.filter((e=>0===this.filters.statusFilters.length||this.filters.statusFilters.includes(e.status))).filter((e=>0===this.filters.wasteFilters.length||this.filters.wasteFilters.includes(e.typeOfWaste.wasteName)))}},created(){this.userStore.isCitizen?this.bookingStore.fetchUserBookings(this.userStore.userId):this.userStore.isManager&&this.bookingStore.fetchAllBookings()},methods:{printPrettyDate(e){return mi()(e).format("DD MMMM YYYY")},applyFilters(e){this.filters=e,this.$refs.fop.hide()}}};const Si=(0,M.Z)(yi,[["render",ui],["__scopeId","data-v-143a3685"]]);var $i=Si;const Pi={class:"flex align-items-center flex-column pt-6 px-3"},Ei=(0,n._)("h5",null,"Booking successfully registered!",-1),Ii=(0,n._)("p",null,' You will receive a notification when the date for your "At Home" collection is determines. ',-1),ji={class:"flex justify-content-center"},Di={class:"flex justify-content-center"},Oi=(0,n._)("br",null,null,-1),xi={class:"field"},Vi={class:"p-float-label"},Mi=(0,n._)("label",{for:"waste"},"Type Of Waste*",-1),Ti={key:0,class:"p-error"},Ui=(0,n._)("br",null,null,-1),Ai={class:"field"},Wi={class:"p-float-label"},Zi={key:0,class:"p-error"},Ni=(0,n._)("br",null,null,-1),Ri={class:"field"},Bi={class:"p-float-label"},zi={key:0,class:"p-error"},Fi=(0,n._)("br",null,null,-1),Li={class:"field"},qi={class:"p-float-label"},Hi={key:0,class:"p-error"},Yi=(0,n._)("br",null,null,-1);function Gi(e,t,s,o,l,a){const r=(0,n.up)("Button"),u=(0,n.up)("Dialog"),c=(0,n.up)("Dropdown"),m=(0,n.up)("InputText"),p=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{visible:l.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>l.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,n.w5)((()=>[(0,n._)("div",ji,[(0,n.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n._)("div",Pi,[(0,n._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),Ei,(0,n._)("p",{style:(0,d.j5)({lineHeight:1.5,textIndent:"1rem"})}," Your booking is registered! ",4),Ii])])),_:1},8,["visible"]),(0,n._)("div",Di,[(0,n.Wm)(p,{class:"m-3"},{title:(0,n.w5)((()=>[(0,n.Uk)(' Create Your New "At Home" Collection Booking ')])),content:(0,n.w5)((()=>[(0,n._)("form",{class:"p-fluid",onSubmit:t[5]||(t[5]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,n._)("div",xi,[(0,n._)("div",Vi,[(0,n.Wm)(c,{id:"waste",modelValue:l.waste,"onUpdate:modelValue":t[1]||(t[1]=e=>l.waste=e),options:l.typesOfWaste,"option-label":"name"},null,8,["modelValue","options"]),Mi]),o.v$.waste.$invalid&&l.submitted||o.v$.waste.$pending.$response?((0,n.wg)(),(0,n.iD)("small",Ti,(0,d.zw)(o.v$.waste.required.$message.replace("Value","Type Of Waste")),1)):(0,n.kq)("",!0)]),Ui,(0,n._)("div",Ai,[(0,n._)("div",Wi,[(0,n.Wm)(m,{id:"city",modelValue:o.v$.city.$model,"onUpdate:modelValue":t[2]||(t[2]=e=>o.v$.city.$model=e),class:(0,d.C_)({"p-invalid":o.v$.city.$invalid&&l.submitted})},null,8,["modelValue","class"]),(0,n._)("label",{for:"city",class:(0,d.C_)({"p-error":o.v$.city.$invalid&&l.submitted})},"City*",2)]),o.v$.city.$invalid&&l.submitted||o.v$.city.$pending.$response?((0,n.wg)(),(0,n.iD)("small",Zi,(0,d.zw)(o.v$.city.required.$message.replace("Value","City")),1)):(0,n.kq)("",!0)]),Ni,(0,n._)("div",Ri,[(0,n._)("div",Bi,[(0,n.Wm)(m,{id:"province",modelValue:o.v$.province.$model,"onUpdate:modelValue":t[3]||(t[3]=e=>o.v$.province.$model=e),class:(0,d.C_)({"p-invalid":o.v$.province.$invalid&&l.submitted})},null,8,["modelValue","class"]),(0,n._)("label",{for:"province",class:(0,d.C_)({"p-error":o.v$.province.$invalid&&l.submitted})},"Province*",2)]),o.v$.province.$invalid&&l.submitted||o.v$.province.$pending.$response?((0,n.wg)(),(0,n.iD)("small",zi,(0,d.zw)(o.v$.province.required.$message.replace("Value","Province")),1)):(0,n.kq)("",!0)]),Fi,(0,n._)("div",Li,[(0,n._)("div",qi,[(0,n.Wm)(m,{id:"address",modelValue:o.v$.address.$model,"onUpdate:modelValue":t[4]||(t[4]=e=>o.v$.address.$model=e),class:(0,d.C_)({"p-invalid":o.v$.address.$invalid&&l.submitted})},null,8,["modelValue","class"]),(0,n._)("label",{for:"address",class:(0,d.C_)({"p-error":o.v$.address.$invalid&&l.submitted})},"Address*",2)]),o.v$.address.$invalid&&l.submitted||o.v$.address.$pending.$response?((0,n.wg)(),(0,n.iD)("small",Hi,(0,d.zw)(o.v$.address.required.$message.replace("Value","Address")),1)):(0,n.kq)("",!0)]),Yi,(0,n.Wm)(r,{type:"submit",label:"Submit",class:"mt-2",disabled:l.submitted},null,8,["disabled"])],32)])),default:(0,n.w5)((()=>[Oi])),_:1})])],64)}var Ki={name:"BookingForm",components:{Dropdown:He.Z,Button:g.Z,Card:O.Z,InputText:Ss.Z,Dialog:Qe.Z},setup(){const e=I();return{v$:(0,qe.Xw)(),userStore:e}},data(){return{waste:null,city:"",province:"",address:"",typesOfWaste:[{name:"TWIGS"},{name:"WASTE OIL"},{name:"IRON"},{name:"ELECTRONICS"},{name:"CLOTHES"},{name:"OTHER"}],submitted:null,showMessage:!1}},validations(){return{city:{required:Le.C1},province:{required:Le.C1},address:{required:Le.C1},waste:{required:Le.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={userId:this.userStore.userId,typeOfWaste:{wasteName:this.waste.name},city:this.city,province:this.province,address:this.address};console.log(e),P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_BOOKING_MICROSERVICE+"/bookings",e).then((e=>{200===e.status&&(console.log(e.data),this.toggleDialog())}))}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/bookings")}}};const Xi=(0,M.Z)(Ki,[["render",Gi]]);var Qi=Xi;const Ji={class:"flex align-items-center flex-column pt-6 px-3"},eo=(0,n._)("h5",null,"Account successfully registered!",-1),to={class:"flex justify-content-center"},so={class:"flex justify-content-center mt-5 w-full"},io=(0,n._)("br",null,null,-1),oo={class:"field"},no={class:"p-float-label"},lo={key:0,class:"p-error"},ao=(0,n._)("br",null,null,-1),ro={class:"field"},uo={class:"p-float-label"},co={key:0,class:"p-error"},mo=(0,n._)("br",null,null,-1),po={class:"field"},ho={class:"p-float-label"},go={key:0,class:"p-error"},fo={key:1,class:"p-error"},vo=(0,n._)("br",null,null,-1),bo={class:"field"},wo={class:"p-float-label"},ko={key:0,class:"p-error"},_o=(0,n._)("br",null,null,-1);function Co(e,t,s,o,l,a){const r=(0,n.up)("Button"),u=(0,n.up)("Dialog"),c=(0,n.up)("InputText"),m=(0,n.up)("Password"),p=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{visible:l.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>l.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,n.w5)((()=>[(0,n._)("div",to,[(0,n.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n._)("div",Ji,[(0,n._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),eo])])),_:1},8,["visible"]),(0,n._)("div",so,[(0,n.Wm)(p,{class:"w-full mx-5 md:w-2"},{title:(0,n.w5)((()=>[(0,n.Uk)(" Registration ")])),content:(0,n.w5)((()=>[(0,n._)("form",{class:"p-fluid",onSubmit:t[6]||(t[6]=(0,i.iM)((t=>a.handleSubmit(!e.v$.$invalid)),["prevent"]))},[(0,n._)("div",oo,[(0,n._)("div",no,[(0,n.Wm)(c,{id:"firstname",modelValue:e.v$.firstname.$model,"onUpdate:modelValue":t[1]||(t[1]=t=>e.v$.firstname.$model=t),class:(0,d.C_)({"p-invalid":e.v$.firstname.$invalid&&l.submitted})},null,8,["modelValue","class"]),(0,n._)("label",{for:"firstname",class:(0,d.C_)({"p-error":e.v$.firstname.$invalid&&l.submitted})},"First Name*",2)]),e.v$.firstname.$invalid&&l.submitted||e.v$.firstname.$pending.$response?((0,n.wg)(),(0,n.iD)("small",lo,(0,d.zw)(e.v$.firstname.required.$message.replace("Value","First Name")),1)):(0,n.kq)("",!0)]),ao,(0,n._)("div",ro,[(0,n._)("div",uo,[(0,n.Wm)(c,{id:"lastname",modelValue:e.v$.lastname.$model,"onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.lastname.$model=t),class:(0,d.C_)({"p-invalid":e.v$.lastname.$invalid&&l.submitted})},null,8,["modelValue","class"]),(0,n._)("label",{for:"lastname",class:(0,d.C_)({"p-error":e.v$.lastname.$invalid&&l.submitted})},"Last Name*",2)]),e.v$.lastname.$invalid&&l.submitted||e.v$.lastname.$pending.$response?((0,n.wg)(),(0,n.iD)("small",co,(0,d.zw)(e.v$.lastname.required.$message.replace("Value","Last Name")),1)):(0,n.kq)("",!0)]),mo,(0,n._)("div",po,[(0,n._)("div",ho,[(0,n.Wm)(c,{id:"email",modelValue:e.v$.email.$model,"onUpdate:modelValue":t[3]||(t[3]=t=>e.v$.email.$model=t),class:(0,d.C_)({"p-invalid":e.v$.email.$invalid&&l.submitted}),onInput:t[4]||(t[4]=e=>l.emailUsed=!1)},null,8,["modelValue","class"]),(0,n._)("label",{for:"email",class:(0,d.C_)({"p-error":e.v$.email.$invalid&&l.submitted})},"Email*",2)]),e.v$.email.$invalid&&l.submitted||e.v$.email.$pending.$response?((0,n.wg)(),(0,n.iD)("small",go,(0,d.zw)(e.v$.email.required.$message.replace("Value","Email")),1)):(0,n.kq)("",!0),l.emailUsed?((0,n.wg)(),(0,n.iD)("small",fo,"This email is already associated with an account")):(0,n.kq)("",!0)]),vo,(0,n._)("div",bo,[(0,n._)("div",wo,[(0,n.Wm)(m,{id:"password",modelValue:l.password,"onUpdate:modelValue":t[5]||(t[5]=e=>l.password=e),class:(0,d.C_)({"p-error":e.v$.password.$invalid&&l.submitted}),"toggle-mask":""},null,8,["modelValue","class"]),(0,n._)("label",{for:"password",class:(0,d.C_)({"p-error":e.v$.password.$invalid&&l.submitted})},"Password*",2)]),e.v$.password.$invalid&&l.submitted||e.v$.password.$pending.$response?((0,n.wg)(),(0,n.iD)("small",ko,(0,d.zw)(e.v$.password.required.$message.replace("Value","Password")),1)):(0,n.kq)("",!0)]),_o,(0,n.Wm)(r,{type:"submit",label:"Submit",class:"mt-2"})],32)])),default:(0,n.w5)((()=>[io])),_:1})])],64)}var yo={name:"RegistrationForm",components:{Password:$s.Z,Button:g.Z,Card:O.Z,InputText:Ss.Z,Dialog:Qe.Z},setup:()=>({v$:(0,qe.Xw)()}),data(){return{firstname:"",lastname:"",email:"",password:"",submitted:null,showMessage:!1,emailUsed:!1}},validations(){return{email:{required:Le.C1,email:Le.Do},lastname:{required:Le.C1},firstname:{required:Le.C1},password:{required:Le.C1,minLength:(0,Le.Ei)(8)}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={firstname:this.firstname,lastname:this.lastname,username:this.email,password:this.password};console.log(e),P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_AUTHENTICATION_MICROSERVICE+"/authentication/register",e).then((e=>{200===e.status&&(console.log(e.data),this.toggleDialog())})).catch((e=>{console.log(e),401===e.response.status&&(this.emailUsed=!0,this.submitted=!1)}))}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/account")}}};const So=(0,M.Z)(yo,[["render",Co]]);var $o=So;const Po={class:"flex align-items-center flex-column pt-6 px-3"},Eo=(0,n._)("h5",null,"Complaint successfully registered!",-1),Io=(0,n._)("p",null,"We will trying to close it as soon as possible in order to give you a better service.",-1),jo={class:"flex justify-content-center"},Do={class:"flex justify-content-center w-full h-full mt-5"},Oo=(0,n._)("br",null,null,-1),xo={class:"field"},Vo={class:"p-float-label"},Mo={key:0,class:"p-error"},To=(0,n._)("br",null,null,-1),Uo={class:"field"},Ao={class:"p-float-label"},Wo={key:0,class:"p-error"},Zo=(0,n._)("br",null,null,-1);function No(e,t,s,o,l,a){const r=(0,n.up)("Button"),u=(0,n.up)("Dialog"),c=(0,n.up)("InputText"),m=(0,n.up)("Textarea"),p=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{visible:l.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>l.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,n.w5)((()=>[(0,n._)("div",jo,[(0,n.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n._)("div",Po,[(0,n._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),Eo,(0,n._)("p",{style:(0,d.j5)({lineHeight:1.5,textIndent:"1rem"})}," Thanks to send us the complaint! ",4),Io])])),_:1},8,["visible"]),(0,n._)("div",Do,[(0,n.Wm)(p,{class:"md:w-3"},{title:(0,n.w5)((()=>[(0,n.Uk)(" Create a new complaint ")])),content:(0,n.w5)((()=>[(0,n._)("form",{class:"p-fluid",onSubmit:t[3]||(t[3]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,n._)("div",xo,[(0,n._)("div",Vo,[(0,n.Wm)(c,{id:"title",modelValue:o.v$.title.$model,"onUpdate:modelValue":t[1]||(t[1]=e=>o.v$.title.$model=e),class:(0,d.C_)({"p-invalid":o.v$.title.$invalid&&l.submitted})},null,8,["modelValue","class"]),(0,n._)("label",{for:"title",class:(0,d.C_)({"p-error":o.v$.title.$invalid&&l.submitted})},"Title",2)]),o.v$.title.$invalid&&l.submitted||o.v$.title.$pending.$response?((0,n.wg)(),(0,n.iD)("small",Mo,(0,d.zw)(o.v$.title.required.$message.replace("Value","Title")),1)):(0,n.kq)("",!0)]),To,(0,n._)("div",Uo,[(0,n._)("div",Ao,[(0,n.Wm)(m,{id:"message",modelValue:o.v$.message.$model,"onUpdate:modelValue":t[2]||(t[2]=e=>o.v$.message.$model=e),"auto-resize":!0,rows:"5",cols:"30",class:(0,d.C_)({"p-invalid":o.v$.message.$invalid&&l.submitted})},null,8,["modelValue","class"]),(0,n._)("label",{for:"message",class:(0,d.C_)({"p-error":o.v$.message.$invalid&&l.submitted})},"Description",2)]),o.v$.message.$invalid&&l.submitted||o.v$.message.$pending.$response?((0,n.wg)(),(0,n.iD)("small",Wo,(0,d.zw)(o.v$.message.required.$message.replace("Value","Description")),1)):(0,n.kq)("",!0)]),Zo,(0,n.Wm)(r,{type:"submit",label:"Submit",class:"mt-2"})],32)])),default:(0,n.w5)((()=>[Oo])),_:1})])],64)}var Ro=s(3337),Bo=s(5865),zo=s.n(Bo),Fo={name:"BookingForm",components:{Button:g.Z,Card:O.Z,InputText:Ss.Z,Textarea:Ro.Z,Dialog:Qe.Z},setup(){const e=I();return{v$:(0,qe.Xw)(),userStore:e}},data(){return{title:"",message:"",submitted:null,showMessage:!1}},validations(){return{title:{required:Le.C1},message:{required:Le.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={id:"Complaint-"+zo()(),ownerId:this.userStore.userId,issuer:"USER",title:this.title,message:this.message};console.log(e),P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_COMPLAINT_MICROSERVICE+"/complaints",e).then((e=>{200===e.status&&(console.log(e.data),this.toggleDialog())}))}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/complaints")}}};const Lo=(0,M.Z)(Fo,[["render",No]]);var qo=Lo;const Ho={class:"flex align-items-center flex-column pt-6 px-3"},Yo=(0,n._)("h5",null,"Collection Point successfully registered!",-1),Go={class:"flex justify-content-center"},Ko={class:"flex justify-content-center max-w-25rem mt-5"},Xo=(0,n._)("br",null,null,-1),Qo={class:"field"},Jo={class:"p-float-label"},en={key:0,class:"p-error"},tn=(0,n._)("br",null,null,-1),sn={class:"field"},on={class:"p-float-label"},nn={key:0,class:"p-error"},ln={key:0,class:"flex-column justify-content-evenly flex-wrap mb-2"},an={key:1,class:"flex justify-content-evenly align-content-center"},rn=(0,n._)("p",null,"Add a Dumpster",-1);function dn(e,t,s,o,l,a){const r=(0,n.up)("Button"),u=(0,n.up)("Dialog"),c=(0,n.up)("InputNumber"),m=(0,n.up)("Divider"),p=(0,n.up)("Chip"),h=(0,n.up)("DumpsterForm"),g=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(u,{visible:l.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>l.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:(0,n.w5)((()=>[(0,n._)("div",Go,[(0,n.Wm)(r,{label:"OK",class:"p-button-text",onClick:a.toggleDialog},null,8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n._)("div",Ho,[(0,n._)("i",{class:"pi pi-check-circle",style:(0,d.j5)({fontSize:"5rem",color:"var(--green-500)"})},null,4),Yo])])),_:1},8,["visible"]),(0,n._)("div",Ko,[(0,n.Wm)(g,null,{title:(0,n.w5)((()=>[(0,n.Uk)(" Add new Collection Point ")])),content:(0,n.w5)((()=>[(0,n._)("form",{class:"p-fluid",onSubmit:t[5]||(t[5]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,n._)("div",Qo,[(0,n._)("div",Jo,[(0,n.Wm)(c,{id:"latitude",modelValue:o.v$.latitude.$model,"onUpdate:modelValue":t[1]||(t[1]=e=>o.v$.latitude.$model=e),class:(0,d.C_)({"p-invalid":o.v$.latitude.$invalid&&l.submitted}),"min-fraction-digits":4,"max-fraction-digits":14},null,8,["modelValue","class"]),(0,n._)("label",{for:"latitude",class:(0,d.C_)({"p-error":o.v$.latitude.$invalid&&l.submitted})},"Latitude*",2)]),o.v$.latitude.$invalid&&l.submitted||o.v$.latitude.$pending.$response?((0,n.wg)(),(0,n.iD)("small",en,(0,d.zw)(o.v$.latitude.required.$message.replace("Value","Latitude")),1)):(0,n.kq)("",!0)]),tn,(0,n._)("div",sn,[(0,n._)("div",on,[(0,n.Wm)(c,{id:"province",modelValue:o.v$.longitude.$model,"onUpdate:modelValue":t[2]||(t[2]=e=>o.v$.longitude.$model=e),class:(0,d.C_)({"p-invalid":o.v$.longitude.$invalid&&l.submitted}),"min-fraction-digits":4,"max-fraction-digits":14},null,8,["modelValue","class"]),(0,n._)("label",{for:"longitude",class:(0,d.C_)({"p-error":o.v$.longitude.$invalid&&l.submitted})},"Longitude*",2)]),o.v$.longitude.$invalid&&l.submitted||o.v$.longitude.$pending.$response?((0,n.wg)(),(0,n.iD)("small",nn,(0,d.zw)(o.v$.longitude.required.$message.replace("Value","Longitude")),1)):(0,n.kq)("",!0)]),(0,n.Wm)(m),l.dumpsters.length>0?((0,n.wg)(),(0,n.iD)("div",ln,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.dumpsters,(e=>((0,n.wg)(),(0,n.j4)(p,{key:e.capacity,label:e.waste.name,class:"m-1",removable:"",onRemove:t=>l.dumpsters.splice(l.dumpsters.indexOf(e),1)},null,8,["label","onRemove"])))),128))])):(0,n.kq)("",!0),l.showDumpsterForm?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",an,[rn,(0,n.Wm)(r,{class:"p-button-rounded",icon:"pi pi-plus",onClick:t[3]||(t[3]=e=>l.showDumpsterForm=!0)})])),l.showDumpsterForm?((0,n.wg)(),(0,n.j4)(h,{key:2,onDumpster:t[4]||(t[4]=e=>{l.showDumpsterForm=!1,l.dumpsters.push(e)})})):(0,n.kq)("",!0),(0,n.Wm)(r,{type:"submit",label:"Submit",class:"mt-2",disabled:l.submitted},null,8,["disabled"])],32)])),default:(0,n.w5)((()=>[Xo])),_:1})])],64)}var un=s(8077),cn={name:"CollectionPointForm",components:{DumpsterForm:Xe,Divider:pe.Z,Button:g.Z,Card:O.Z,InputNumber:Ye.Z,Dialog:Qe.Z,Chip:un.Z},setup(){const e=I();return{v$:(0,qe.Xw)(),userStore:e}},data(){return{waste:null,latitude:this.$route.params.position[0],longitude:this.$route.params.position[1],typesOfWaste:[{name:"TWIGS"},{name:"WASTE OIL"},{name:"IRON"},{name:"ELECTRONICS"},{name:"CLOTHES"},{name:"OTHER"}],dumpsters:[],submitted:null,showDumpsterForm:!1,showMessage:!1}},validations(){return{latitude:{required:Le.C1},longitude:{required:Le.C1}}},methods:{handleSubmit(e){if(this.submitted=!0,e){let e={latitude:this.latitude,longitude:this.longitude};P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/collectionpoints/",e).then((e=>{200===e.status&&(console.log(e.data),Promise.all(this.dumpsters.map((t=>{let s={dumpster:{capacity:t.capacity,wasteName:t.waste.name},collectionPointId:e.data.id};return P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_DUMPSTER_MICROSERVICE+"/dumpsters/",s)}))).then((()=>{this.toggleDialog()})))}))}},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.$router.push("/dashboard/map")}}};const mn=(0,M.Z)(cn,[["render",dn]]);var pn=mn;const hn=e=>((0,n.dD)("data-v-7f173108"),e=e(),(0,n.Cn)(),e),gn={class:"flex justify-content-center m-5 md:m-8"},fn={class:"col-12 bg-white m-1 md:m-0"},vn={class:"flex flex-column md:flex-row align-items-center justify-content-between md:p-5"},bn={class:"flex flex-column align-items-center md:align-items-start justify-content-start md:text-left mx-2"},wn={class:"text-lg md:text-3xl my-2"},kn={class:"product-description"},_n={class:"flex flex-row align-items-center"},Cn=hn((()=>(0,n._)("i",{class:"pi pi-trash mr-2"},null,-1))),yn={class:"product-category"},Sn={class:"flex align-items-center flex-column justify-content-evenly"},$n=hn((()=>(0,n._)("p",{class:"m-3"}," No missions to show ",-1)));function Pn(e,t,s,i,o,l){const a=(0,n.up)("ProgressSpinner"),r=(0,n.up)("Button"),u=(0,n.up)("router-link"),c=(0,n.up)("DataView");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i.missionsStore.fetchingMissions?((0,n.wg)(),(0,n.j4)(a,{key:0})):(0,n.kq)("",!0),(0,n._)("div",gn,[i.missionsStore.fetchingMissions?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(c,{key:0,value:i.missionsStore.missions,layout:"list",paginator:!0,rows:9},{header:(0,n.w5)((()=>[])),list:(0,n.w5)((e=>[(0,n._)("div",fn,[(0,n._)("div",vn,[(0,n._)("div",bn,[(0,n._)("h3",wn,(0,d.zw)(e.data.missionId),1),(0,n._)("div",kn," Type of Mission: "+(0,d.zw)(e.data.typeOfMission),1),(0,n._)("div",_n,[Cn,(0,n._)("span",yn,(0,d.zw)(e.data.typeOfWaste.wasteName),1)])]),(0,n._)("div",Sn,[(0,n._)("span",{class:(0,d.C_)("mission-status-"+e.data.completed+" mt-3")},(0,d.zw)(l.missionStatus(e.data.completed)),3),(0,n.Wm)(u,{to:"/dashboard/missions/"+e.data.missionId},{default:(0,n.w5)((({href:e,navigate:t})=>[(0,n.Wm)(r,{href:e,class:"p-button-sm p-button-raised my-2",icon:"pi pi-list",label:"Steps",onClick:t},null,8,["href","onClick"])])),_:2},1032,["to"])])])])])),empty:(0,n.w5)((()=>[$n])),_:1},8,["value"]))])],64)}var En={name:"MissionsListComponent",components:{DataView:zt.Z,Button:g.Z,ProgressSpinner:Je.Z},setup(){const e=ei();return{missionsStore:e}},mounted(){this.missionsStore.fetchMissions()},methods:{missionStatus(e){return e?"COMPLETED":"IN PROGRESS"}}};const In=(0,M.Z)(En,[["render",Pn],["__scopeId","data-v-7f173108"]]);var jn=In;const Dn=e=>((0,n.dD)("data-v-ca73ed42"),e=e(),(0,n.Cn)(),e),On={class:"flex justify-content-center mt-5 mx-5 md:mx-8"},xn={class:"flex justify-content-end align-content-center"},Vn={class:"col-12 bg-white my-2 md:my-0"},Mn={class:"flex flex-column md:flex-row align-items-center justify-content-between md:p-5"},Tn={class:"flex flex-column align-items-center md:align-items-start justify-content-start md:text-left m-2"},Un={class:"text-lg md:text-3xl my-2"},An={class:"product-description mb-0"},Wn={key:0,class:"product-description w-full"},Zn=Dn((()=>(0,n._)("p",null,"Occupied Volume:",-1))),Nn={class:"flex align-items-center flex-column justify-content-evenly"};function Rn(e,t,s,i,o,l){const a=(0,n.up)("ProgressSpinner"),r=(0,n.up)("Button"),u=(0,n.up)("TruckForm"),c=(0,n.up)("Dialog"),m=(0,n.up)("ProgressBar"),p=(0,n.up)("DataView");return(0,n.wg)(),(0,n.iD)(n.HY,null,[o.fetchingTrucks?((0,n.wg)(),(0,n.j4)(a,{key:0})):(0,n.kq)("",!0),(0,n._)("div",On,[o.fetchingTrucks?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(p,{key:0,value:o.trucks,layout:"list",paginator:!0,rows:9},{header:(0,n.w5)((()=>[(0,n._)("div",xn,[(0,n.Wm)(r,{class:"p-button-success p-button-rounded p-button-raised",icon:"pi pi-plus",onClick:t[0]||(t[0]=e=>o.showTruckForm=!0)}),(0,n.Wm)(c,{visible:o.showTruckForm,"onUpdate:visible":t[2]||(t[2]=e=>o.showTruckForm=e),modal:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"m-3",onTruck:t[1]||(t[1]=e=>l.addTruck(e))})])),_:1},8,["visible"])])])),list:(0,n.w5)((t=>[(0,n._)("div",Vn,[(0,n._)("div",Mn,[(0,n._)("div",Tn,[(0,n._)("h3",Un,(0,d.zw)(t.data.truckId),1),(0,n._)("div",An," Capacity: "+(0,d.zw)(t.data.capacity),1),t.data.inMission?((0,n.wg)(),(0,n.iD)("div",Wn,[Zn,(0,n.Wm)(m,{class:"w-full",value:l.truckOccupiedPercentage(t.data)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(l.truckOccupiedPercentage(t.data)>7?l.truckOccupiedPercentage(t.data)+"%":""),1)])),_:2},1032,["value"])])):(0,n.kq)("",!0)]),(0,n._)("div",Nn,[(0,n._)("span",{class:(0,d.C_)("truck-status-"+t.data.inMission+" mt-3")},(0,d.zw)(l.truckStatus(t.data.inMission)),3),t.data.inMission?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(r,{key:0,class:"p-button-sm p-button-raised p-button-rounded p-button-danger my-2",icon:"pi pi-trash",onClick:e=>l.deleteTruck(t.data)},null,8,["onClick"])),t.data.inMission?((0,n.wg)(),(0,n.j4)(r,{key:1,class:"p-button-sm p-button-raised p-button-rounded p-button-primary my-2",icon:"pi pi-list",onClick:s=>{e.$router.push("/dashboard/missions/truck/"+t.data.truckId)}},null,8,["onClick"])):(0,n.kq)("",!0)])])])])),_:1},8,["value"]))])],64)}const Bn={class:"flex justify-content-center"},zn=(0,n._)("br",null,null,-1),Fn={class:"field"},Ln={class:"p-float-label"},qn={key:0,class:"p-error"},Hn=(0,n._)("br",null,null,-1);function Yn(e,t,s,o,l,a){const r=(0,n.up)("InputNumber"),u=(0,n.up)("Button"),c=(0,n.up)("Card");return(0,n.wg)(),(0,n.iD)("div",Bn,[(0,n.Wm)(c,null,{title:(0,n.w5)((()=>[(0,n.Uk)(" Add new Truck ")])),content:(0,n.w5)((()=>[(0,n._)("form",{class:"p-fluid",onSubmit:t[1]||(t[1]=(0,i.iM)((e=>a.handleSubmit(!o.v$.$invalid)),["prevent"]))},[(0,n._)("div",Fn,[(0,n._)("div",Ln,[(0,n.Wm)(r,{id:"capacity",modelValue:o.v$.capacity.$model,"onUpdate:modelValue":t[0]||(t[0]=e=>o.v$.capacity.$model=e),class:(0,d.C_)({"p-invalid":o.v$.capacity.$invalid&&l.submitted}),"min-fraction-digits":2,"max-fraction-digits":2},null,8,["modelValue","class"]),(0,n._)("label",{for:"capacity",class:(0,d.C_)({"p-error":o.v$.capacity.$invalid&&l.submitted})},"Capacity*",2)]),o.v$.capacity.$invalid&&l.submitted||o.v$.capacity.$pending.$response?((0,n.wg)(),(0,n.iD)("small",qn,(0,d.zw)(o.v$.capacity.required.$message.replace("Value","Capacity")),1)):(0,n.kq)("",!0)]),Hn,(0,n.Wm)(u,{type:"submit",label:"Add",class:"mt-2",disabled:l.submitted},null,8,["disabled"])],32)])),default:(0,n.w5)((()=>[zn])),_:1})])}var Gn={name:"TruckForm",components:{Button:g.Z,Card:O.Z,InputNumber:Ye.Z},emits:["truck"],setup(){const e=I();return{v$:(0,qe.Xw)(),userStore:e}},data(){return{capacity:0,submitted:null}},validations(){return{capacity:{required:Le.C1}}},methods:{handleSubmit(e){this.submitted=!0,e&&this.$emit("truck",{position:{latitude:0,longitude:0},occupiedVolume:{value:0},capacity:this.capacity,inMission:!1})}}};const Kn=(0,M.Z)(Gn,[["render",Yn]]);var Xn=Kn,Qn={name:"TrucksListComponent",components:{DataView:zt.Z,Button:g.Z,ProgressSpinner:Je.Z,ProgressBar:dt.Z,Dialog:Qe.Z,TruckForm:Xn},data(){return{fetchingTrucks:!0,showTruckForm:!1,truckPolling:null,trucks:[]}},mounted(){this.fetchTrucks(),this.activatePolling()},unmounted(){clearInterval(this.truckPolling)},methods:{activatePolling(){this.truckPolling=setInterval((()=>this.updateTrucks()),3e3)},truckStatus(e){return e?"IN MISSION":"AVAILABLE"},fetchTrucks(){this.trucks=[],P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_TRUCK_MICROSERVICE+"/trucks/").then((e=>{200===e.status&&(this.trucks=e.data,this.fetchingTrucks=!1)}))},addTruck(e){this.showTruckForm=!1,clearInterval(this.truckPolling),P.ZP.post({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_TRUCK_MICROSERVICE+"/trucks/",e).then((t=>{200===t.status&&(e.truckId=t.data,this.trucks.push(e),this.activatePolling())}))},deleteTruck(e){clearInterval(this.truckPolling),this.trucks.splice(this.trucks.indexOf(e),1),P.ZP["delete"]({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_TRUCK_MICROSERVICE+"/trucks/"+e.truckId).then((e=>{200===e.status&&this.activatePolling()}))},updateTrucks(){P.ZP.get({NODE_ENV:"production",BASE_URL:"/dashboard/"}.VUE_APP_TRUCK_MICROSERVICE+"/trucks/").then((e=>{200===e.status&&(this.trucks=e.data)}))},truckOccupiedPercentage(e){return Math.round(e.occupiedVolume.value/e.capacity*100)}}};const Jn=(0,M.Z)(Qn,[["render",Rn],["__scopeId","data-v-ca73ed42"]]);var el=Jn;const tl=[{path:"/dashboard",name:"",component:Mt},{path:"/dashboard/map",name:"Map",component:Mt},{path:"/dashboard/collectionPoints/new/:position*",name:"Collection Point Form",component:pn},{path:"/dashboard/trucks",name:"Trucks",component:el},{path:"/dashboard/missions",name:"Missions",component:jn},{path:"/dashboard/missions/:id",name:"Missions Details",component:ii},{path:"/dashboard/missions/truck/:truckId",name:"Missions Details By Truck",component:ii},{path:"/dashboard/complaints",name:"Complaints",component:cs},{path:"/dashboard/complaints/new",name:"Complaint Form",component:qo},{path:"/dashboard/bookings",name:"Bookings",component:$i},{path:"/dashboard/bookings/new",name:"Bookings Form",component:Qi},{path:"/dashboard/account",name:"Account",component:Rs},{path:"/dashboard/account/registration",name:"Registration Form",component:$o}],sl=(0,Q.p7)({history:(0,Q.PO)(),routes:tl});sl.beforeEach((e=>{const t=I(),s=j();if("Account"!==e.name&&"Map"!==e.name&&""!==e.name&&"Registration Form"!==e.name&&!t.isLogged)return"/dashboard/account";""!==s.sessionId&&t.isLogged&&s.connect(t.userId)}));const il=(0,o.WB)();il.use(J.Z);const ol=(0,i.ri)(Y);ol.use(il),ol.use(G.Z),ol.use(K.Z),ol.use(sl),ol.directive("badge",X.Z),ol.mount("#app")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,n){if(!i){var l=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],n=e[u][2];for(var a=!0,r=0;r<i.length;r++)(!1&n||l>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(a=!1,n<l&&(l=n));if(a){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,o,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};s.t=function(i,o){if(1&o&&(i=this(i)),8&o)return i;if("object"===typeof i&&i){if(4&o&&i.__esModule)return i;if(16&o&&"function"===typeof i.then)return i}var n=Object.create(null);s.r(n);var l={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){l[e]=function(){return i[e]}}));return l["default"]=function(){return i},s.d(n,l),n}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+"."+{93:"ed65c43c",431:"c5216f61",858:"a82c0db2",891:"18c0dcff"}[e]+".js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="dashboard:";s.l=function(i,o,n,l){if(e[i])e[i].push(o);else{var a,r;if(void 0!==n)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+n){a=c;break}}a||(r=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",t+n),a.src=i),e[i]=[o];var m=function(t,s){a.onerror=a.onload=null,clearTimeout(p);var o=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(s)})),t)return t(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),r&&document.head.appendChild(a)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/dashboard/"}(),function(){var e={143:0};s.f.j=function(t,i){var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var n=new Promise((function(s,i){o=e[t]=[s,i]}));i.push(o[2]=n);var l=s.p+s.u(t),a=new Error,r=function(i){if(s.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var n=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+l+")",a.name="ChunkLoadError",a.type=n,a.request=l,o[1](a)}};s.l(l,r,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,n,l=i[0],a=i[1],r=i[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(r)var u=r(s)}for(t&&t(i);d<l.length;d++)n=l[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},i=self["webpackChunkdashboard"]=self["webpackChunkdashboard"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(9307)}));i=s.O(i)})();
//# sourceMappingURL=app.0d2d5da2.js.map